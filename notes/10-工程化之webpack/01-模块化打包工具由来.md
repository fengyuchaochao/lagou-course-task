# 模块化打包工具

## 为什么需要模块化打包工具？

通过前面的介绍，我们也了解到了**模块化思想**在前端发展中的作用，但是单纯的依赖ES Modules等很显然是不够的，主要有以下一些问题：

* 新特性的兼容性问题
* 模块文件过多，导致网络请求频繁
* 所有的前端资源都需要进行模块化

1.  **ES Modules等新特性的兼容性问题**

![image](http://note.youdao.com/yws/res/11836/2F9EFABC72774EA89C5EAEABE7DE3C2E)

所以，面对这些es6+的新特性，我们当然在开发阶段是希望可以使用的，然后通过构建工具，将其转成低版本的es5，从而更好的解决浏览器的兼容性问题。

2. **模块文件过多，导致网络请求频繁**

![image](http://note.youdao.com/yws/res/11847/AD61A68163264E49BFFAD88F7198A99B)

想象一下，如果我们项目中导入了大量的模块，每个模块对应一个文件，那页面渲染的时候，是不是每个页面都要发送一个请求，这样也是不合理的。

也就说，在开发环境，是需要我们进行模块划分的，但是到了生产环境是不需要的化，所以需要我们通过构建工具将这些模块文件打包到一个统一的bundle.js文件中，从而减少网络的频繁请求。

3. **所有的前端资源都需要进行模块化**

![image](http://note.youdao.com/yws/res/11852/84222DDC2DBA4DA4B13475C5431E8929)

我们之前也只介绍的是js的模块化规范，但其实在开发过程中，html，css，图片等资源本质上都是需要进行模块化的。


注意：这里有个细节要注意，上面我们提到的这三个问题，其实前两个问题grunt,gulp等工具也是可以完成的，但是第三个问题，grunt,gulp没法实现，只能通过webpack等工具来完成，webpack的核心就是一切皆模块，在js中也可以引用图片模块，css模块等

## 常见模块化打包工具

主流工具主要有以下三种：

* Webpack
* Rollup.js
* Parcel


例如：webpack就可以解决一下这些问题：

1. 文件打包问题：可以将导入的零散模块，最终打包到一个bundle.js文件里。
2. 代码拆分：同时也可以根据自己的需求，把指定的模块打包到对应的文件里，而不是都打包到一个文件里，避免单个文件多大。
3. 资源模块：webpack一切皆模块，例如js中可以import一个css文件，也可以import一张图片。

通过前面这些介绍，我们要知道一点：**模块化针对的是整个前端的模块化，而不仅仅是js的模块化。**


## 如何学习webpack?

大家可能都知道webpack各种配置非常复杂，而且难于记忆，那么该如何去更好的学习webpack呢？

1. 首先是理解webpack的核心思想，即一切皆模块化，然后模块之间以树结构的形式相互依赖，webpack从入口文件开始打包，遍历所有模块，最后打包到一个bundle.js文件里。
2. 学习webpack的基本使用，即entry,output，loader，plugin等内容如何配置。
3. 知道webpack的基本配置之后，接下来就是围绕实际开发展开了，首先是针对本地开发环境，如何搭建一套最佳规范？基于此目的去学习一系列新的配置和插件等。
4. 最后就是围绕生产环境最终的代码去展开一系列的优化，这个时候，会学习到各种打包优化技巧，从而更好的打包我们项目的代码，保证生产环境代码最优。
